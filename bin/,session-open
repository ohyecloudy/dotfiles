#!/bin/bash

set -x

show_whale() {
    cat << 'EOF'

        .
       ":"
     ___:____     |"\/"|
   ,'        `.    \  /
   |  O        \___/  |
 ~^~^~^~^~^~^~^~^~^~^~^~^~

   Oops! Something went wrong...

EOF
}

trap 'show_whale' ERR
set -e

cd ~/.dotfiles
git pull

# error code 1 is returned even during successful updating doom in Windows
doom install || true
doom sync || true
doom env || true

cd ~/org_roam
git pull
